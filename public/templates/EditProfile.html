<template>
    <div>
        <div id="user">Edit Profile</div>
        <div class="ed-pr-nm">Name: </div>
        <input type="text" onkeyup="validString('user-name')" onkeydown="validString('user-name')" class="input"
            id="user-name"><br />
        <div class="ed-pr-nm">Gender: </div>
        <input type="text" onkeyup="validString('user-gender')" onkeydown="validString('user-gender')" class="input"
            id="user-gender"><br />
        <div class="ed-pr-nm">Date of Birth : </div>
        <input type="date" onchange="$('#profile-success').hide()" id="birthdate" name="birthdate"
            min="1900-01-01"><br />
        <div id="profile-error">One or more of the above fields are in the wrong format or empty!</div> <br />
        <div id="profile-success">Profile was updated successfullly!</div> <br />
        <img id="profile-pic" src="../img/user/default/user-480.png" class="img-thumbnail rounded float-left"
            width="200" height="200">
        <div class="ed-pr-nm">Change Profile Picture: </div><input type="file" onchange="$('#profile-success').hide()"
            accept="image/*" capture="camera" id="cameraInput">
        <div id="pic-error" class="error-msg"></div>
        <!-- <button type="button" class="btn btn-secondary btn-lg btn-space" onclick="initEditProfile()">Reset Profile
            Fields</button> -->
        <div class="loader"></div>
        <!-- class="editProfileBtn"  this was originally infront of the button classs on line 20-->
        <button type="button" class="btn btn-secondary btn-lg btn-space"
            onclick="router.loadRoute('accountSettings')">Change Email or Password</button>
        <button type="button" class="btn btn-secondary btn-lg btn-space" onclick="updateProfile()">Submit
            Changes</button>
        <script>
            $(".loader").hide();
            $("#profile-error").hide();
            $("#profile-success").hide();
            //Date is in YYYY-MM-DD Format
            console.log("loading in fields");
            initEditProfile();
            function changePhoto() {
                let fileReader = new FileReader();
                fileReader.readAsDataURL(document.getElementById("cameraInput").value);
                fileReader.onloadend = () => {
                    console.log(this);
                };
                console.log(document.getElementById("cameraInput").value);
            }
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#profile-pic').attr('src', `${e.target.result}`);
                    }

                    reader.onload = function (e) {
                        $('#profile-pic').attr('src', `${e.target.result}`);
                    }

                    reader.readAsDataURL(input.files[0]); // convert to base64 string
                }
            }

            $("#cameraInput").on("change", function () {
                readURL(this);
            });
            initNavBar();
        </script>
    </div>
</template>